!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.Intermediary=r():e.Intermediary=r()}(self,(()=>{return e={362:e=>{class r{constructor(e,r){this.middleware=e,this.afterware=r}static series(e,t,n){return async function(){if(!e.every((e=>e instanceof r)))throw new Error("intermediaries should be instances of Intermediary");let o=[...e],i=o.pop(),a=i.involve(t,n).bind(i);o.reverse();for(const e of o)a=e.involve(a,n).bind(e);return a(...arguments)}}static createMiddleware(e){return r=>t=>function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e(r,t,...o)}}static createAfterware(e){return r=>t=>function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return e(r,t,n,...i)}}involve(e){var r=this;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function(){let n=[],o=function(){for(var r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return n=t,e(...t)};if(r.middleware){let e=[...r.middleware].reverse();for(const r of e)o=await r(t)(o)}let i=await o(...arguments);if(r.afterware){let e=[...r.afterware].reverse();o=e=>e;for(const r of e)o=await r(t)(o);return o(i,...n)}return i}}}e.exports=r,r.default=r}},r={},function t(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return e[n](i,i.exports,t),i.exports}(362);var e,r}));